<h1>METTI STRINGA DI CONNESSIONE</h1>
<div class="container">
    <div class="row">
        <div class="col-md-offset-2 col-md-2">
            <div class="btn btn-default" id="eustats">Statistiche Europee</div>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-2">
            <div id="nationlist"></div>
        </div>
        <div class="col-md-2">
            <div class="btn btn-default" id="statsbynation">Statistiche Per Nazione</div>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-2">
            <div id="langlist"></div>
        </div>
        <div class="col-md-2">
            <div class="btn btn-default" id="statsbylang">Statistiche Geografiche Per Linguaggio</div>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-md-2">
            <div id="period"></div>
        </div>
        <div class="col-md-2">
            <div class="btn btn-default" id="statsbyperiod">Statistiche Per Periodo</div>
        </div>
    </div>
</div>

@section scripts {
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script type="text/javascript">

        var eustats = $('#eustats');

        var statsbynation = $('#statsbynation');

        var statsbylang = $('#statsbylang');

        var statsbyperiod = $('#statsbyperiod');

        var nationlist = $('#nationlist');

        var langlist = $('#langlist');

        var period = $('#period');

        //creazione elenco nazioni
        $.ajax({
            url: '/api/Nation',
            type: 'GET',
            dataType: 'json'
        }).done(function (data) {
            var html = ''

            html += '<select id="nationpicker">';

            for (var i = 0; i < data.length; i++) {
                var item = data[i];
                html += '<option value="' + item.Nation + '">' + item.Nation + '</option>';
            }

            html += '</select>';

            nationlist.html(html);
        }).error(function (e) {
            alert("errore")
        })

        //creazione elenco linguaggi
        $.ajax({
            url: '/api/Lang',
            type: 'GET',
            dataType: 'json'
        }).done(function (data) {
            var html = ''

            html += '<select id="langpicker">';

            for (var i = 0; i < data.length; i++) {
                var item = data[i];
                html += '<option value="' + item.Prog_Lang + '">' + item.Prog_Lang + '</option>';
            }

            html += '</select>';

            langlist.html(html);
        }).error(function (e) {
            alert("errore")
        })

        //creazione elenco periodi
        $.ajax({
            url: '/api/Yem',
            type: 'GET',
            dataType: 'json'
        }).done(function (data) {
            var html = ''

            html += '<select id="monthpicker">';

            for (var i = 0; i < data.length; i++) {
                var item = data[i];
                if(item.Month != null)
                    html += '<option value="' + item.Month + '">' + item.Month + '</option>';
            }

            html += '</select>';

            html += '<select id="yearpicker">';

            for (var i = 0; i < data.length; i++) {
                var item = data[i];
                if (item.Year != null)
                    html += '<option value="' + item.Year + '">' + item.Year + '</option>';
            }

            html += '</select>';

            period.html(html);
        }).error(function (e) {
            alert("errore")
        })

        function gettingvals() {
            var nationpicker = $('#nationpicker');
            var langpicker = $('#langpicker');

            var yearpickerS = $('#yearpicker');
            var monthpickerS = $('#monthpicker');
        }

        eustats.on('click', function () {
            window.location.href = "/Filters/GlobalStats";
        });

        statsbynation.on('click', function () {
            window.location.href = "/Filters/NationStats?nation=" + nationpicker.value;
        });

        statsbylang.on('click', function () {
            window.location.href = "/Filters/LangStats?lang=" + langpicker.value;
        });

        statsbyperiod.on('click', function () {
            window.location.href = "/Filters/PeriodStats?year=" + yearpicker.value + "&month=" + monthpicker.value;
        });

    </script>
}
